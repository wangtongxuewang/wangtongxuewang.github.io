<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>C++函数传参方式 | 王同学的博客</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://wangtongxuewang.github.io/favicon.ico?v=1642233050557">
<link rel="stylesheet" href="https://wangtongxuewang.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="C++函数传参方式
引言
C++函数传参方式有很多种选择，可以传值、传指针、传引用、返回值等，故需要一种内部规范让函数参数传递简明易懂，同时兼顾性能；
代码示例
以下代码使用了结构化绑定，需要编译器支持C++17；
#include &lt..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://wangtongxuewang.github.io">
        <img src="https://wangtongxuewang.github.io/images/avatar.png?v=1642233050557" class="site-logo">
        <h1 class="site-title">王同学的博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      coding && writing
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://wangtongxuewang.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">C++函数传参方式</h2>
            <div class="post-date">2021-04-25</div>
            
            <div class="post-content" v-pre>
              <h1 id="c函数传参方式">C++函数传参方式</h1>
<h2 id="引言">引言</h2>
<p>C++函数传参方式有很多种选择，可以传值、传指针、传引用、返回值等，故需要一种内部规范让函数参数传递简明易懂，同时兼顾性能；</p>
<h2 id="代码示例">代码示例</h2>
<p>以下代码使用了结构化绑定，需要编译器支持C++17；</p>
<pre><code class="language-c++">#include &lt;tuple&gt;

class CDemo1 {
    // ...
};

class CDemo2 {
    // ..
};

// 函数传参方式示例
std::tuple&lt;double, std::string&gt; testFunc(const int n, 
                                         const std::vector&lt;double&gt;&amp; x,
                                         CDemo1&amp; out1,
                                         CDemo2* out2 = nullptr)
{
    // do something
}

int main()
{
    const int n = 10;
    const std::vector&lt;double&gt; x = {1.1, 2.2, 3.3};
    CDemo1 d1;
    CDemo2 d2;
    auto [y, errInfo] = testFunc(n, x, d1, &amp;d2);
    
    // ...
    
    return 0;
}
</code></pre>
<h2 id="结论">结论</h2>
<p>通过上述代码示例，可总结函数传参中传值、传引用、传指针、函数返回值的的 <strong>最佳实践</strong>：</p>
<h3 id="函数入参">函数入参</h3>
<p>POD类型使用常值（如  const double x）；</p>
<p>类类型使用常引用（如  const T&amp; x）；</p>
<h3 id="函数出参">函数出参</h3>
<p>若有可能，优先使用函数返回值，尽量不要使用函数出参，以增强可读性；</p>
<p>若需要使用出参，优先使用 T&amp; ；</p>
<p>在出参中，若可能为空（如 有默认参数 = nullptr）或者其指向可能变化，才使用 T* ；</p>
<h3 id="函数返回值">函数返回值</h3>
<p>若是新产生的变量，则返回 单个/多个 值（类类型同样可以返回值，只要保证返回值优化发生，则性能与出参是一样的）；</p>
<p>若是修改函数体之外的变量，可返回比本函数生命周期更长变量的引用/指针；</p>
<hr>
<div class="post-copyright">
    <div class="author">    <b>本文作者：</b>
        <a href="https://wangtongxuewang.github.io/post/about/">王同学</a>
    </div>
    <div class="link">      <b>博客主页：</b>
        <a href="https://wangtongxuewang.github.io/">https://wangtongxuewang.github.io/</a>
    </div>
    <div class="copyright"> <b>版权声明：</b>
        本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
    </div>
</div>
            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://wangtongxuewang.github.io/post/chan-shu-dui-xiang/">
                  <h3 class="post-title">
                    C++函数对象
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
